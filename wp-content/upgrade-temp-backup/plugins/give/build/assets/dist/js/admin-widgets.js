(()=>{"use strict";function e(e){e.on("chosen:ready",(function(){jQuery(this).next(".chosen-container").find("input.chosen-search-input").after('<span class="spinner"></span>')})),e.chosen({inherit_select_classes:!0,placeholder_text_single:Give.fn.getGlobalVar("one_option"),placeholder_text_multiple:Give.fn.getGlobalVar("one_or_more_option")}),e.on("chosen:no_results",(function(){let e=jQuery(this).next(".chosen-container"),t=e.find("li.no-results"),s="";const n=Give.fn.getGlobalVar("chosen");s=e.hasClass("give-select-chosen-ajax")&&t.length?n.ajax_search_msg.replace("{search_term}",'"'+jQuery("input",e).val()+'"'):n.no_results_msg.replace("{search_term}",'"'+jQuery("input",e).val()+'"'),t.html(s),jQuery(document.body).on("keyup",".give-select.chosen-container .chosen-search input, .give-select.chosen-container .search-field input",(function(e){let t=jQuery(this).val(),s=jQuery(this).closest(".give-select-chosen"),n=s.prev(),i=s.find('input[type="text"]'),a=(s.hasClass("variations"),e.which),o="give_form_search",r=this;if(s.prev().data("search-type")){if("no_ajax"===n.data("search-type"))return;o="give_"+n.data("search-type")+"_search"}t.length>0&&t.length<=3||!o.length||9===a||13===a||16===a||17===a||18===a||19===a||20===a||27===a||33===a||34===a||35===a||36===a||37===a||38===a||39===a||40===a||44===a||45===a||144===a||145===a||91===a||93===a||224===a||112<=a&&123>=a||(clearTimeout(Give.cache.chosenSearchTypingTimer),s.addClass("give-select-chosen-ajax"),Give.cache.chosenSearchTypingTimer=setTimeout((function(){jQuery.ajax({type:"POST",url:ajaxurl,data:{action:o,s:t,fields:jQuery(r).closest("form").serialize()},dataType:"json",beforeSend:function(){n.closest("ul.chosen-results").empty(),i.prop("disabled",!0)},success:function(e){s.removeClass("give-select-chosen-ajax"),jQuery("option:not(:selected)",n).remove(),e.length?(jQuery.each(e,(function(e,s){jQuery('option[value="'+s.id+'"]',n).length||(0===t.length?n.append(`<option value="${s.id}">${s.name}</option>`):n.prepend(`<option value="${s.id}">${s.name}</option>`))})),s.prev("select.give-select-chosen").trigger("chosen:updated")):s.prev("select.give-select-chosen").trigger("chosen:no_results"),i.prop("disabled",!1),i.val(t).focus()}}).fail((function(e){window.console&&window.console.log&&console.log(e)})).done((function(e){i.prop("disabled",!1)}))}),342))})),jQuery(".give-select-chosen .chosen-search input").each((function(){let e=jQuery(this).parent().parent().parent().prev("select.give-select-chosen").data("search-type"),t="";"form"===e?t=Give.fn.getGlobalVar("search_placeholder"):(e="search_placeholder_"+e,Give.fn.getGlobalVar(e)&&(t=Give.fn.getGlobalVar(e))),jQuery(this).attr("placeholder",t)}))}))}!function(t){function s(e){e.on("change",".give_forms_display_style_setting_row input",(function(){i(t(this))})),e.on("change","select.give-select",(function(){a(jQuery(this))}))}function n(t){Promise.all([e(t)]).then((()=>{t.each((function(){const e=jQuery(this).next();e.css("width","100%"),jQuery("ul.chosen-results",e).css("width","100%"),jQuery(this).parent().removeClass("give-hidden"),parseInt(jQuery(this).val())?a(jQuery(this)):jQuery(".js-loader",jQuery(this).closest(".widget-content")).addClass("give-hidden")}))}))}function i(e){e.each((function(){const e=jQuery(this).closest(".give_forms_widget_container"),t=jQuery(".js-form-template-settings.active",e),s=jQuery("p.give_forms_display_style_setting_row",t),n=t.hasClass("js-new-form-template-settings");if(t.hasClass("js-legacy-form-template-settings")){const e=s.next();"onpage"===jQuery("input:checked",s).val()?e.hide():e.show()}else n&&("button"===jQuery("input:checked",s).val()?t.find("p").not(s).removeClass("give-hidden"):t.find("p").not(s).addClass("give-hidden"))}))}function a(e){e.each((function(){const e=t(this),s=jQuery(this).closest(".give_forms_widget_container"),n=jQuery(".js-loader",s),a=jQuery(".js-legacy-form-template-settings",s),o=jQuery(".js-new-form-template-settings",s);a.addClass("give-hidden").removeClass("active"),o.addClass("give-hidden").removeClass("active"),n.removeClass("give-hidden"),jQuery.post(ajaxurl,{action:"give_get_form_template_id",formId:e.val(),security:jQuery('input[name="_wpnonce"]',s).val()},(function(r){n.addClass("give-hidden"),!0===r.success&&("legacy"===r.data?a.removeClass("give-hidden").addClass("active"):o.removeClass("give-hidden").addClass("active")),i(e),function(e){let s;e.each((function(){const e=t(this);e.wpColorPicker({change:()=>{window.clearTimeout(s),s=window.setTimeout((function(){e.trigger("change")}),100)}})}))}(jQuery(".give_forms_button_color_setting_row input",s))}))}))}jQuery((function(){const e=jQuery(".widget-liquid-right");e&&function(e){s(e),n(jQuery(".give-select",e))}(e)})),jQuery(document).ajaxSuccess((function(e,t,s){const i=Give.fn.getParameterByName("action",s.data),a=Give.fn.getParameterByName("delete_widget",s.data),o=Give.fn.getParameterByName("widget-id",s.data),r=Give.fn.getParameterByName("sidebar",s.data),c=jQuery(`#${r} [id*="${o}"]`),l=jQuery(".give-select",c),u=!!parseInt(l.val());if(a||"save-widget"!==i)return!1;console.log("pass 1",l),Promise.all([n(l)]).then((()=>{u||jQuery(".js-loader",c).addClass("give-hidden")}))})),jQuery(document).on("widget-added",(function(e,t){const i=jQuery(".give-select",t),a=!!parseInt(i.val());console.log("pass 2",t),jQuery(".control-section-sidebar").length&&Promise.all([n(i)]).then((()=>{a||jQuery(".js-loader",t).addClass("give-hidden"),s(t)}))}))}(jQuery)})();