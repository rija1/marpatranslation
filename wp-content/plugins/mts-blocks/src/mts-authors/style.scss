/* 
 * Enhanced styling for existing Pods Grid filter system
 * Targets the current inc/pods-grid-template.php structure
 */

// Your existing color variables
$colour_darkblue: #194b57;
$colour_blue: #6c97b4;
$colour_red: #d8613c;
$colour_gold: #b5933f;
$colour_yellow: #f8bd3b;
$colour_lightyellow: #fff5dc;

// Grid-matching colors
$grid_blue: #3498db;
$grid_blue_dark: #2980b9;
$grid_text_dark: #2c3e50;
$grid_text_light: #666;
$grid_border: #dee2e6;
$grid_bg_light: #f8f9fa;

/* ================================================
 * FIXED: Left Menu (keeping previous fixes)
 * ================================================ */
.mts_kh_left_menu {
    background: white !important;
    border-radius: 12px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    border: 1px solid $grid_border;
    overflow: hidden;
    
    .wp-block-heading {
        background: $grid_bg_light;
        margin: 0 !important;
        padding: 1rem 1.5rem;
        font-weight: 600;
        font-size: 1rem;
        color: $grid_text_dark;
        border-bottom: 2px solid $grid_border;
        text-transform: uppercase;
        letter-spacing: 0.5px;
    }
    
    & ul {
        list-style-type: none;
        margin: 0;
        padding: 0;
        
        & li {
            margin-bottom: 0;
            border-bottom: 1px solid rgba($grid_border, 0.3);
            position: relative;
            
            &:last-child {
                border-bottom: none;
            }
            
            // FIXED: Current page highlighting
            &.current-menu-item {
                background: rgba($grid_blue, 0.08);
                
                &:before {
                    content: '';
                    position: absolute;
                    left: 0;
                    top: 0;
                    bottom: 0;
                    width: 4px;
                    background: $grid_blue;
                    z-index: 2;
                }
                
                a {
                    color: $grid_blue;
                    font-weight: 600;
                    padding-left: 1.5rem;
                }
            }
        }
        
        & a {
            display: block;
            padding: 1rem 1.5rem;
            color: $grid_text_dark;
            text-decoration: none;
            font-weight: 500;
            font-size: 0.95rem;
            transition: all 0.2s ease;
            position: relative;
            
            &:before {
                margin-right: 0.75rem;
                opacity: 0.6;
                transition: all 0.2s ease;
            }
            
            &[href*="authors"]:before { content: 'üë§'; }
            &[href*="translators"]:before { content: 'üåü'; }
            &[href*="translations"]:before { content: 'üîÑ'; }
            &[href*="texts"]:before { content: 'üìñ'; }
            &[href*="tibetan-terms"]:before { content: 'üèîÔ∏è'; }
            &[href*="translated-terms"]:before { content: 'üî§'; }
            
            // FIXED: Hover state with proper border alignment
            &:hover,
            &:focus {
                background: rgba($grid_blue, 0.12);
                color: $grid_blue_dark;
                
                &:before {
                    opacity: 1;
                    transform: scale(1.1);
                }
                
                &:after {
                    content: '';
                    position: absolute;
                    left: 0;
                    top: 0;
                    bottom: 0;
                    width: 3px;
                    background: rgba($grid_blue, 0.6);
                    z-index: 1;
                }
            }
        }
    }
}

/* ================================================
 * ENHANCED: Existing Filter System
 * ================================================ */

// Enhanced styling for your existing #termFilter input
#termFilter,
.term-filter {
    width: 100%;
    max-width: 400px;
    margin-bottom: 1.5rem;
    padding: 0.75rem 1rem 0.75rem 2.5rem;
    border: 2px solid $grid_border;
    border-radius: 8px;
    font-size: 0.95rem;
    font-family: inherit;
    background: white;
    transition: all 0.2s ease;
    position: relative;
    
    // Add search icon using CSS
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' fill='%23666' viewBox='0 0 16 16'%3E%3Cpath d='M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z'/%3E%3C/svg%3E");
    background-repeat: no-repeat;
    background-position: 0.75rem center;
    background-size: 1rem;
    
    &::placeholder {
        color: $grid_text_light;
        opacity: 0.7;
    }
    
    &:focus {
        outline: none;
        border-color: $grid_blue;
        box-shadow: 0 0 0 3px rgba($grid_blue, 0.1);
        background-color: #fafbfc;
    }
    
    &:hover {
        border-color: rgba($grid_blue, 0.5);
    }
}

// Container for the filter (if you want to wrap it)
.filter-container {
    background: white;
    padding: 1.5rem;
    border-radius: 12px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    border: 1px solid $grid_border;
    margin-bottom: 2rem;
    
    // Filter header/label styling
    .filter-label {
        display: block;
        font-size: 0.85rem;
        font-weight: 600;
        color: $grid_text_dark;
        text-transform: uppercase;
        letter-spacing: 0.5px;
        margin-bottom: 0.75rem;
        
        &:before {
            content: 'üîç ';
            opacity: 0.7;
        }
    }
}

/* ================================================
 * ENHANCED: Grid Styling (matches your custom grids)
 * ================================================ */

// Enhanced styling for the existing .mts-block-table
.mts-block-table {
    border: 1px solid $grid_border;
    border-radius: 12px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    overflow: hidden;
    background: white;
    
    .table-header {
        background: $grid_bg_light;
        font-weight: 600;
        border-bottom: 2px solid $grid_border;
        font-size: 1rem;
        color: $grid_text_dark;
        
        // If using grid layout
        &[style*="grid"] {
            padding: 16px 20px;
        }
        
        // If using flex or default layout
        &:not([style*="grid"]) {
            padding: 1rem 1.5rem;
        }
    }
    
    .table-row {
        border-bottom: 1px solid rgba($grid_border, 0.5);
        transition: background 0.2s ease;
        
        &:hover {
            background: rgba($grid_blue, 0.05);
        }
        
        &:last-child {
            border-bottom: none;
        }
        
        // If using grid layout
        &[style*="grid"] {
            padding: 16px 20px;
            min-height: 80px;
            align-items: center;
        }
        
        // If using flex or default layout
        &:not([style*="grid"]) {
            padding: 1rem 1.5rem;
        }
    }
    
    // Enhanced view button styling
    .view-button {
        background: $grid_blue;
        color: white;
        padding: 8px 16px;
        border-radius: 6px;
        text-decoration: none;
        font-size: 0.85rem;
        font-weight: 500;
        transition: all 0.2s ease;
        display: inline-block;
        text-align: center;
        
        &:hover {
            background: $grid_blue_dark;
            color: white;
            transform: translateY(-1px);
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }
    }
    
    // Enhanced relationship links
    .relationship-link {
        color: $grid_blue;
        text-decoration: none;
        font-weight: 500;
        transition: color 0.2s ease;
        
        &:hover {
            color: $grid_blue_dark;
            text-decoration: underline;
        }
        
        &:not(:last-child):after {
            content: ', ';
            color: $grid_text_light;
        }
    }
}

/* ================================================
 * ENHANCED: Pagination Styling
 * ================================================ */

.pagination {
    margin-top: 2rem;
    text-align: center;
    
    a, span {
        display: inline-block;
        padding: 0.5rem 0.75rem;
        margin: 0 0.25rem;
        border: 1px solid $grid_border;
        color: $grid_text_dark;
        text-decoration: none;
        border-radius: 4px;
        transition: all 0.2s ease;
        font-size: 0.9rem;
        
        &:hover {
            background: $grid_blue;
            color: white;
            border-color: $grid_blue;
        }
        
        &.current {
            background: $grid_blue;
            color: white;
            border-color: $grid_blue;
        }
    }
    
    .prev, .next {
        font-weight: 600;
        
        &:hover {
            transform: translateY(-1px);
        }
    }
}

/* ================================================
 * FILTERING STATES & ANIMATIONS
 * ================================================ */

// Loading state for AJAX filtering
.mts-block-table {
    &.filtering {
        opacity: 0.6;
        pointer-events: none;
        position: relative;
        
        &:after {
            content: 'Filtering...';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(white, 0.9);
            padding: 1rem 2rem;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            font-weight: 600;
            color: $grid_blue;
        }
    }
}

// Smooth transitions for filtered results
.table-row {
    &.fade-in {
        animation: fadeInRow 0.3s ease forwards;
    }
    
    &.fade-out {
        animation: fadeOutRow 0.2s ease forwards;
    }
}

@keyframes fadeInRow {
    from {
        opacity: 0;
        transform: translateY(10px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

@keyframes fadeOutRow {
    from {
        opacity: 1;
        transform: translateY(0);
    }
    to {
        opacity: 0;
        transform: translateY(-5px);
    }
}

/* ================================================
 * MOBILE RESPONSIVENESS
 * ================================================ */

@media (max-width: 768px) {
    #termFilter,
    .term-filter {
        max-width: 100%;
        margin-bottom: 1rem;
        font-size: 16px; // Prevents zoom on iOS
    }
    
    .filter-container {
        padding: 1rem;
        border-radius: 8px;
        margin-bottom: 1.5rem;
    }
    
    .mts-block-table {
        border-radius: 8px;
        
        .table-header,
        .table-row {
            padding: 1rem !important;
            font-size: 0.9rem;
        }
        
        .view-button {
            padding: 6px 12px;
            font-size: 0.8rem;
            width: 100%;
            margin-top: 0.5rem;
        }
    }
    
    .pagination {
        margin-top: 1.5rem;
        
        a, span {
            padding: 0.4rem 0.6rem;
            font-size: 0.8rem;
            margin: 0 0.1rem;
        }
    }
    
    .mts_kh_left_menu {
        border-radius: 8px;
        margin-bottom: 1.5rem;
    }
}
