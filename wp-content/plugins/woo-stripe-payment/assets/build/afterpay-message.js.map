{"version":3,"file":"afterpay-message.js","mappings":"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","sources":["webpack://wcStripeModules/./assets/js/frontend/bnpl-messages/afterpay/afterpay-mixin.js","webpack://wcStripeModules/external window [\"wcStripeModules\",\"checkoutModules\"]","webpack://wcStripeModules/external window [\"wcStripeModules\",\"messageModules\"]","webpack://wcStripeModules/external window [\"wc_stripe\"]","webpack://wcStripeModules/webpack/bootstrap","webpack://wcStripeModules/./assets/js/frontend/bnpl-messages/afterpay/index.js"],"sourcesContent":["export default function (Base) {\n    return class Afterpay extends Base {\n\n        getMessageOptions() {\n            return {\n                ...super.getMessageOptions(),\n                isEligible: this.isEligible(this.getTotalPrice())\n            }\n        }\n\n        isEligible(price) {\n            return (price >= this.getMin() && price <= this.getMax());\n        }\n\n        getMin() {\n            const currency = this.gateway.get_currency();\n            const params = this.gateway.params.requirements[currency];\n            return params ? params[1] : 0;\n        }\n\n        getMax() {\n            const currency = this.gateway.get_currency();\n            const params = this.gateway.params.requirements[currency];\n            return params ? params[2] : 0;\n        }\n    }\n}\n\n","module.exports = window[\"wcStripeModules\"][\"checkoutModules\"];","module.exports = window[\"wcStripeModules\"][\"messageModules\"];","module.exports = window[\"wc_stripe\"];","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","import {BaseGateway, ProductGateway, stripe} from '@paymentplugins/wc-stripe';\nimport {getPaymentMethod} from '@paymentplugins/wc-stripe/checkout';\nimport {\n    CartMessage,\n    CheckoutMessage,\n    CategoryMessage,\n    ProductMessage\n} from '@paymentplugins/wc-stripe/message-modules';\nimport Mixin from './afterpay-mixin';\n\nconst elementType = 'afterpayClearpayMessage';\nconst isSupported = (gateway) => {\n    const {currencies = [], currency} = gateway.params;\n    return currencies.includes(currency);\n}\n\nclass AfterpayGateway extends BaseGateway {\n\n    constructor(params) {\n        super(params);\n    }\n\n    get_element_options() {\n        return {}\n    }\n};\n\nif (typeof wc_stripe_afterpay_cart_params !== 'undefined') {\n    const clazz = Mixin(CartMessage);\n    new clazz(new AfterpayGateway(wc_stripe_afterpay_cart_params), {\n        elementType,\n        elementId: 'wc-stripe-afterpay-cart-msg',\n        containerId: 'wc-stripe-afterpay-cart-container',\n        isSupported\n    });\n}\nif (typeof wc_stripe_afterpay_product_params !== 'undefined') {\n    Object.assign(AfterpayGateway.prototype, ProductGateway.prototype);\n    new ProductMessage(new AfterpayGateway(wc_stripe_afterpay_product_params), {\n        elementType,\n        elementId: 'wc-stripe-afterpay-product-msg',\n        isSupported\n    });\n}\nif (typeof wc_stripe_local_payment_params !== 'undefined') {\n    if (wc_stripe_local_payment_params?.gateways?.stripe_afterpay) {\n        const clazz = Mixin(CheckoutMessage);\n        new clazz(getPaymentMethod('stripe_afterpay'), {\n            elementType,\n            elementId: 'wc-stripe-afterpay-message-container',\n            isSupported\n        });\n    }\n}\nif (typeof wc_stripe_bnpl_shop_params !== 'undefined') {\n    new CategoryMessage(stripe, wc_stripe_bnpl_shop_params, {\n        id: 'stripe_afterpay',\n        elementType,\n        isSupported: (instance) => {\n            const {currency} = instance.data;\n            return instance.data.stripe_afterpay.supportedCurrencies.includes(currency);\n        },\n        isSupportedProduct: (instance, product) => {\n            const price = product.price;\n            const {currency} = instance.data;\n            const {hideIneligible} = instance.data.stripe_afterpay;\n            const [country, min, max] = instance.data[instance.id].requiredParams[currency];\n            return !hideIneligible || min <= price && price <= max;\n        }\n    });\n}"],"names":["Base","_Base","Afterpay","_classCallCheck","arguments","_inherits","key","value","_objectSpread","_get","_getPrototypeOf","prototype","call","isEligible","this","getTotalPrice","price","getMin","getMax","currency","gateway","get_currency","params","requirements","module","exports","window","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","__webpack_modules__","obj","_wcStripe","require","_checkout","_messageModules","_afterpayMixin","__esModule","default","_arrayLikeToArray","arr","len","length","i","arr2","Array","_defineProperties","target","props","descriptor","enumerable","configurable","writable","Object","defineProperty","_toPropertyKey","t","r","_typeof","e","Symbol","toPrimitive","TypeError","String","_toPrimitive","_callSuper","o","self","ReferenceError","_assertThisInitialized","_possibleConstructorReturn","_isNativeReflectConstruct","Reflect","construct","constructor","apply","Boolean","valueOf","setPrototypeOf","getPrototypeOf","bind","__proto__","_setPrototypeOf","p","_wc_stripe_local_paym","elementType","isSupported","_gateway$params","_gateway$params$curre","currencies","includes","AfterpayGateway","_BaseGateway","instance","Constructor","subClass","superClass","create","protoProps","BaseGateway","wc_stripe_afterpay_cart_params","Mixin","CartMessage","elementId","containerId","wc_stripe_afterpay_product_params","assign","ProductGateway","ProductMessage","wc_stripe_local_payment_params","gateways","stripe_afterpay","CheckoutMessage","getPaymentMethod","wc_stripe_bnpl_shop_params","CategoryMessage","stripe","id","data","supportedCurrencies","isSupportedProduct","product","hideIneligible","_instance$data$instan","requiredParams","isArray","_arrayWithHoles","l","iterator","n","u","a","f","next","done","push","return","_iterableToArrayLimit","minLen","toString","slice","name","from","test","_unsupportedIterableToArray","_nonIterableRest","min","max"],"sourceRoot":""}