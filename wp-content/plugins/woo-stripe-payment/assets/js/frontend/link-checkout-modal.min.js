import $ from"jquery";import{getPaymentMethod}from"@paymentplugins/wc-stripe/checkout";const addLinkIcon=()=>{$("#billing_email").addClass("stripe-link-icon-container"),$("#billing_email").after($(wcStripeLinkParams.linkIcon))};$(()=>{const a=getPaymentMethod("stripe_cc");if("undefined"===wcStripeLinkParams||!wcStripeLinkParams?.elementOptions?.mode)return!1;if(a)try{if(wcStripeLinkParams.popupEnabled){const i=a.stripe.linkAutofillModal(a.elements);$(document.body).on("keyup",'[name="billing_email"]',e=>{i.launch({email:e.currentTarget.value})}),wcStripeLinkParams.launchLink&&i.launch({email:$('[name="billing_email"]').val()}),i.on("autofill",e=>{var i,{shippingAddress:e=null,billingAddress:n}=e.value;e&&(i={name:e.name,...e.address},a.populate_shipping_fields(i)),n&&(i={name:n.name,...n.address},a.populate_billing_fields(i)),a.fields.toFormFields(),a.set_payment_method(a.gateway_id),a.show_new_payment_method(),a.hide_save_card(),e&&a.maybe_set_ship_to_different(),$('[name="terms"]').prop("checked",!0),a.fields.required("billing_phone")&&a.fields.isEmpty("billing_phone")||(a.payment_token_received=!0,a.elements.submit().then(e=>{e.error||a.get_form().trigger("submit")})["catch"](e=>{console.log(e)}))})}wcStripeLinkParams.linkIconEnabled&&addLinkIcon()}catch(e){console.log(e)}});